{% extends "garbage_map/wrapper.html" %}
{% load staticfiles %}

{% block extra_head %}
    <link href="https://fonts.googleapis.com/css?family=PT+Sans:400,700&display=swap" rel="stylesheet">
    <link rel="stylesheet/less" type="text/css" href="{% static 'less/recycle.less' %}" />
{% endblock %}

{% block sidebar %}
    <div class="recycle__header">
        <a href="/" class="recycle__logo"></a>
        <a href="#" class="hamburger j-hamburger">
            <div class="hamburger__line hamburger__line_top"></div>
            <div class="hamburger__line hamburger__line_middle"></div>
            <div class="hamburger__line hamburger__line_bottom"></div>
        </a>
    </div>
    <div id="view_index">
        <div class="recycle__subheader recycle__subheader_index">Выберите категорию</div>

        {% spaceless %}
        <div class="catlist" id = "slist_garbage">
        {% for cat in categories %} 
            <div class="catlist__item {% if cat.icon_class %}catlist__item_{{ cat.icon_class }}{% endif %}" onClick="view_category({{ cat.pk }})">
                <div class="catlist__name">{{ cat.name_html|safe|default:cat.name }}</div>
            </div>
        {% endfor %}
        </div>
        {% endspaceless %}

        <div class="recycle__contribute">
            Информацию о новых пунктах сбора
            отправляйте на почту <a href="mailto:recycle@irk.ru">recycle@irk.ru</a>
        </div>
    </div>
    
    <div id="view_category" style="display: none">
        <div class="recycle__subheader-category">
        </div>
        <div class="firmlist"></div>
    </div>

    <div id="view_firm" style="display: none">
        <div class="recycle__subheader-category">
        </div>
        {% comment %} <div class="firmcard">
            <div class="firmcard__head">
                <div class="firmcard__title">Галерея Виктора Бронштейна</div>
                <div class="firmcard__address">Иркутск, 3-го июля, 25</div>
            </div> //
            <div class="firmcard__photo"></div> //
            <div class="firmcard__body">
                <div class="firmcard__hours">пн-пт 19:00 — 23</div>
                <div class="firmcard__phone">+7 950 089-15-17</div>
                <div class="firmcard__desc">Прием по предварительному звонку</div>
            </div>

            <div class="firmcard__also also">
                <span class="also__label">Также принимается</span>
                {% spaceless %}
                <ul class="also__list">
                    <li>стекло</li>
                    <li>металл</li>
                    <li>макулатура</li>
                </ul>
                {% endspaceless %}
            </div>
        </div> {% endcomment %}
        <div class="recycle__socfooter">
            <div>
                {% spaceless %}
                <a href="https://vk.com/tvoy_irkutsk">
                    <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36">
                        <g fill="none" fill-rule="evenodd" transform="translate(1 1)">
                            <circle cx="17" cy="17" r="17" stroke="#000"/>
                            <path fill="#000" d="M26.819 22.697c-.055-.094-.386-.853-1.986-2.414-1.675-1.636-1.45-1.371.568-4.198 1.227-1.721 1.718-2.773 1.564-3.223-.078-.268-1.05-.199-1.05-.199H22.91s-.468-.012-.655.314c-.337.586-.476 1.333-1.11 2.465-1.338 2.393-1.875 2.517-2.092 2.369-.51-.345-.384-1.39-.384-2.132 0-2.318.335-3.283-.65-3.534-.327-.082-.52-.107-1.404-.145-1.116.025-1.98.003-2.495.268-.34.176-.605.567-.444.592.2.027.648.128.887.468.308.442.296 1.431.296 1.431s.178 2.727-.412 3.066c-.405.233-.961-.242-2.156-2.411-.61-1.11-.673-1.835-1.072-2.338-.261-.33-.71-.413-.71-.413H7.652s-.486-.041-.586.092c-.141.174-.012.537-.012.537s2.237 5.502 4.77 8.276c2.323 2.542 4.96 2.427 4.96 2.427s1.533.07 1.741-.302c.154-.155.165-.551.165-.551s-.024-1.69.72-1.935c.733-.244 1.677 1.628 2.675 2.35.767.51.98.438 1.33.438h2.669s1.397-.144.735-1.298"/>
                        </g>
                    </svg>
                </a>
                <a href="https://twitter.com/tvoyirkutsk">
                    <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36">
                        <g fill="none" fill-rule="evenodd" transform="translate(1 1)">
                            <circle cx="17" cy="17" r="17" stroke="#000"/>
                            <path fill="#000" d="M26.75 11.875c-.69.303-1.431.406-2.209.497.686-.516 1.037-.692 1.584-1.747-.742.433-1.46.402-2.335.571A3.874 3.874 0 0 0 20.983 10c-2.125 0-3.85 1.696-3.85 3.787 0 .296.035.585.101.863-3.197-.158-6.087-1.734-7.984-4.025-.33.56-.466 1.278-.466 1.973 0 1.313.68 2.471 1.713 3.151a3.88 3.88 0 0 1-1.743-.473v.047c0 1.834 1.325 3.364 3.086 3.714a3.93 3.93 0 0 1-1.738.064c.49 1.504 1.84 2.743 3.523 2.774-1.64 1.856-5.324 1.284-5.625 1.25C9.704 24.199 11.726 25 13.898 25c7.075 0 10.944-5.77 10.944-10.774 0-.164-.004-.328-.01-.49.75-.533 1.402-1.1 1.918-1.861"/>
                        </g>
                    </svg>
                </a>
                <a href="https://www.facebook.com/tvoyirkutsk">
                    <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36">
                        <g fill="none" fill-rule="evenodd" transform="translate(1 1)">
                            <circle cx="17" cy="17" r="17" stroke="#000"/>
                            <g fill="#000">
                                <path d="M14 11.028V27h3.81V11.667c0-.438.24-.667.638-.667H21V7h-2.938C13.902 7 14 10.505 14 11.028"/>
                                <path d="M20.078 17.968L12 18v-4h9z"/>
                            </g>
                        </g>
                    </svg>
                </a>
                <a href="https://www.ok.com/">
                    <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36">
                        <g fill="none" fill-rule="evenodd" transform="translate(1 1)">
                            <circle cx="17" cy="17" r="17" stroke="#000"/>
                            <g fill="#000">
                                <path d="M17 17c2.758 0 5-2.242 5-4.999A5.005 5.005 0 0 0 17 7c-2.757 0-5 2.243-5 5.001A5.005 5.005 0 0 0 17 17m0-7c1.103 0 2 .897 2 2s-.897 2-2 2-2-.897-2-2 .898-2 2-2"/>
                                <path d="M18.483 20.821a9.188 9.188 0 0 0 2.846-1.175 1.43 1.43 0 0 0 .45-1.975 1.437 1.437 0 0 0-1.98-.45 6.237 6.237 0 0 1-6.598 0 1.437 1.437 0 0 0-1.98.45 1.43 1.43 0 0 0 .45 1.975 9.197 9.197 0 0 0 2.845 1.175l-2.74 2.734a1.43 1.43 0 0 0 1.016 2.444c.368 0 .735-.14 1.016-.419l2.691-2.686 2.694 2.686c.56.56 1.469.56 2.03 0a1.427 1.427 0 0 0 0-2.025l-2.74-2.734"/>
                            </g>
                        </g>
                    </svg>
                </a>
                {% endspaceless %}
            </div>
        </div>
    </div>
{% endblock %}

{% block main %}
    <script>
        var dots = {{ dots_json|safe }};
        var categories = {{ categories_json|safe }};
        var div_list, myMap, last_cat = 0;
        $(function(){
            ymaps.ready(init);
        });
    </script>

    
    <div id = "map" style = "width: 100%; height: 100vh"></div> 

{% endblock %} 


{% block bottom_scripts %}
    <script>
        var less = {
            javascriptEnabled: true
        };
    </script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/less.js/3.9.0/less.min.js" ></script>
{% endblock %}
